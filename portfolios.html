<!-- portfolios.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary SEO Meta Tags -->
    <title>Pranay Jagtap | Machine Learning Portfolio Projects</title>
    <meta name="title" content="Pranay Jagtap | Machine Learning Portfolio Projects">
    <meta name="description"
        content="Explore a collection of machine learning projects by Pranay Jagtap. Showcasing expertise in Python, TensorFlow, PyTorch & NLP.">

    <!-- Keywords for SEO -->
    <meta name="keywords"
        content="Machine Learning Projects, Data Science Portfolio, Python Projects, AI Portfolio, TensorFlow Projects, PyTorch Projects, Machine Learning Engineer, Data Analysis, Pranay Jagtap Projects">

    <!-- Robots Meta Tag -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://pranayjagtap.netlify.app/portfolios">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pranayjagtap.netlify.app/portfolios">
    <meta property="og:title" content="Pranay Jagtap - Machine Learning Portfolio Projects">
    <meta property="og:description"
        content="Explore a collection of innovative machine learning projects by Pranay Jagtap. Showcasing expertise in Python, TensorFlow, PyTorch & NLP.">
    <meta property="og:image" content="https://github.com/PranayJagtap06/PJ/blob/master/pranay_sq.jpg">
    <meta property="og:site_name" content="Pranay Jagtap Machine Learning Portfolio Projects">

    <!-- Linkedin Details -->
    <meta name="linkedin:card" content="summary_large_image">
    <meta name="linkedin:title" property="og:title" content="Pranay Jagtap - Machine Learning Explorer | About" />
    <meta name="linkedin:industry" content="Information Technology and Services">
    <meta name="linkedin:creator" content="@pranayj-ml-engineer">
    <meta name="description"
        content="Explore Pranay Jagtap's machine learning portfolio, showcasing projects and expertise." />
    <meta name="image" property="og:image" content="https://github.com/PranayJagtap06/PJ/blob/master/pranay_sq.jpg" />
    <meta name="description" property="og:description"
        content="Electrical Engineer turned Machine Learning enthusiast. Passionate about Python and NLP. Exploring innovative solutions in data science and machine learning." />
    <meta property="og:type" content="Website" />
    <meta name="linkedin:verified" content="true">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://pranayjagtap.netlify.app/portfolios">
    <meta name="twitter:title" content="Pranay Jagtap - Machine Learning Portfolio Projects">
    <meta name="twitter:description"
        content="Explore a collection of innovative machine learning projects by Pranay Jagtap. Showcasing expertise in Python, TensorFlow, PyTorch & NLP.">
    <meta name="twitter:image" content="https://github.com/PranayJagtap06/PJ/blob/master/pranay_sq.jpg">
    <meta name="twitter:creator" content="@pranay_jagtap_">

    <!-- Author Meta Tag -->
    <meta name="author" content="Pranay Jagtap">

    <!-- Geo Tags -->
    <meta name="geo.region" content="IN-MH"> <!-- Assuming you're in Maharashtra, India -->
    <meta name="geo.placename" content="Nagpur">

    <!-- Language and Country -->
    <meta http-equiv="content-language" content="en-IN">

    <!-- Existing meta tags -->
    <meta name="theme-color" content="#ffffff">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebPage",
            "name": "Pranay Jagtap - Machine Learning Portfolio Projects",
            "description": "Explore a collection of innovative machine learning projects by Pranay Jagtap.",
            "mainEntity": {
                "@type": "ItemList",
                "itemListElement": [
                    {
                        "@type": "CreativeWork",
                        "name": "Machine Learning Projects",
                        "description": "A collection of data science and machine learning projects"
                    }
                ]
            },
            "author": {
                "@type": "Person",
                "name": "Pranay Jagtap",
                "jobTitle": "Machine Learning Explorer",
                "knowsAbout": [
                    "Machine Learning",
                    "Python",
                    "TensorFlow",
                    "PyTorch",
                    "NLP"
                ]
            }
        }
    </script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
        integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="apple-touch-icon" type="image/png" href="favicon_io/apple-touch-icon-180x180.png">
    <link rel="manifest" href="favicon_io/site.webmanifest">
    <meta name="theme-color" content="#ffffff">

</head>

<body>

    <!-- <header id="main-header"> -->
    <nav class="navbar">
        <ul>
            <li><a href="index.html" class="nav-link" rel="noopener noreferrer">Home</a></li>
            <li><a href="portfolios.html" class="nav-link" rel="noopener noreferrer">Portfolios</a></li>
            <li><a href="PranayJagtap.pdf" class="nav-link" target="_blank" rel="noopener noreferrer">CV/Resume</a></li>
            <li><a href="about.html" class="nav-link" rel="noopener noreferrer">About</a></li>
            <li><a href="contact.html" class="nav-link" rel="noopener noreferrer">Contact</a></li>
            <li class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="🔍 Search portfolios...">
                <div class="search-results" id="search-results"></div>
            </li>
        </ul>
    </nav>
    <!-- </header> -->

    <main>
        <div id="notification-banner" class="notification-banner">
            <div class="notification-content-container">
                <span class="notification-text"><em>PyTorch & NLP projects coming soon...</em></span>
                <button class="notification-close" aria-label="Close notification">&times;</button>
            </div>
        </div>
        <div class="container padding">
            <div class="portfolios-grid" id="portfoliosGrid"></div>
            <div class="pagination-container" id="paginationContainer"></div>
        </div>
    </main>

    <script src="/js/nav-script.js"></script>
    <!-- <script src="/js/portfolios.js"></script> -->
    <script>
        class PortfolioManager {
            constructor() {
                this.portfolios = [];
                this.filteredPortfolios = [];
                this.currentPage = 1;
                this.itemsPerPage = 2;
                this.totalPortfolios = 0;
                this.isLoading = false;
            }

            async loadPortfolios(page = 1) {
                try {
                    this.isLoading = true;
                    this.showLoading();

                    // Updated path for GitHub Pages
                    const response = await fetch('./portfolios/portfolios.json');
                    if (!response.ok) throw new Error('Failed to load portfolios');

                    const data = await response.json();
                    this.portfolios = data; // Store the loaded portfolios
                    this.portfolios.sort((a, b) => new Date(b.date) - new Date(a.date));
                    // this.filteredPortfolios = this.portfolios;
                    // this.totalPortfolios = this.portfolios.length;
                    // this.currentPage = page;

                    // Check for tag filter from URL 3
                    const urlParams = new URLSearchParams(window.location.search);
                    const tagFilter = urlParams.get('tag');

                    if (tagFilter) {
                        // Clean the tag filter
                        const cleanTagFilter = tagFilter.trim().replace(/^#?\s*/, '');

                        // Filter portfolios by tag
                        this.filteredPortfolios = this.portfolios.filter(portfolio =>
                            portfolio.tags.some(tag =>
                                tag.toLowerCase() === cleanTagFilter.toLowerCase()
                            )
                        );

                        // Set search input to the tag
                        const searchInput = document.getElementById('search-input');
                        if (searchInput) {
                            searchInput.value = cleanTagFilter;
                        }
                    } else {
                        this.filteredPortfolios = this.portfolios;
                    }

                    // Check for tag filter from URL 2
                    // const urlParams = new URLSearchParams(window.location.search);
                    // const tagFilter = urlParams.get('tag');

                    // if (tagFilter) {
                    //     // Filter portfolios by tag
                    //     this.filteredPortfolios = this.portfolios.filter(portfolio => 
                    //         portfolio.tags.some(tag => 
                    //             tag.toLowerCase() === decodeURIComponent(tagFilter).toLowerCase()
                    //         )
                    //     );

                    //     // Set search input to the tag
                    //     const searchInput = document.getElementById('search-input');
                    //     if (searchInput) {
                    //         searchInput.value = decodeURIComponent(tagFilter);
                    //     }
                    // } else {
                    // this.filteredPortfolios = this.portfolios;
                    // }

                    // Check for tag filter from URL 1
                    // const urlParams = new URLSearchParams(window.location.search);
                    // const tagFilter = urlParams.get('tag');

                    // if (tagFilter) {
                    //     this.filteredPortfolios = this.portfolios.filter(portfolio => 
                    //         portfolio.tags.some(tag => tag.toLowerCase() === tagFilter.toLowerCase())
                    //     );

                    //     // Set search input to the tag
                    //     const searchInput = document.getElementById('search-input');
                    //     if (searchInput) {
                    //         searchInput.value = tagFilter;
                    //     }
                    // } else {
                    //     this.filteredPortfolios = this.portfolios;
                    // }

                    this.totalPortfolios = this.filteredPortfolios.length;
                    this.currentPage = page;

                    this.displayPortfolios();
                    this.updatePagination();
                } catch (error) {
                    this.showError('Failed to load portfolios. Please try again later.');
                    console.error('Error:', error);
                } finally {
                    this.isLoading = false;
                    this.hideLoading();
                }
            }

            displayPortfolios() {
                const startIndex = (this.currentPage - 1) * this.itemsPerPage;
                const endIndex = startIndex + this.itemsPerPage;
                const portfoliosToShow = this.filteredPortfolios.slice(startIndex, endIndex);

                const gridContainer = document.getElementById('portfoliosGrid');
                gridContainer.innerHTML = '';

                portfoliosToShow.forEach(portfolio => {
                    const card = this.createPortfolioCard(portfolio);
                    gridContainer.appendChild(card);
                });
            }

            createPortfolioCard(portfolio) {
                const card = document.createElement('div');
                card.className = 'portfolios-card';
                // card.onclick = () => window.location.href = `./portfolios/${portfolio.id}/content.md`;
                card.onclick = () => window.location.href = `portfolio-template.html?id=${portfolio.id}`;

                const date = new Date(portfolio.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });

                card.innerHTML = `
                    <h3 class="portfolios-title">${portfolio.title}</h3>
                    <p class="portfolios-description">${portfolio.description}</p>
                    <p class="portfolios-date">${formattedDate}</p>
                    ${portfolio.tags ? `
                        <div class="tags-container">
                            ${portfolio.tags.map(tag => `<span class="tag"><i class="fa-solid fa-tag"></i> ${tag}</span>`).join('')}
                        </div>
                    ` : ''}
                `;

                // Add click event listeners to tags
                const tagElements = card.querySelectorAll('.tag');
                tagElements.forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent card click
                        const searchTerm = e.target.textContent.trim(); // Get tag text
                        window.location.href = `portfolios.html?tag=${encodeURIComponent(searchTerm)}`;

                    });
                });

                return card;
            }

            updatePagination() {
                const totalPages = Math.ceil(this.totalPortfolios / this.itemsPerPage);
                const container = document.getElementById('paginationContainer');

                if (totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                container.innerHTML = `
                    <button class="paginations-button" 
                            onclick="portfolioManager.loadPortfolios(${this.currentPage - 1})" 
                            ${this.currentPage === 1 ? 'disabled' : ''}>
                        Previous
                    </button>
                    ${this.generatePageNumbers(totalPages)}
                    <button class="paginations-button" 
                            onclick="portfolioManager.loadPortfolios(${this.currentPage + 1})" 
                            ${this.currentPage === totalPages ? 'disabled' : ''}>
                        Next
                    </button>
                `;
            }

            generatePageNumbers(totalPages) {
                let pages = '';
                const maxButtons = 5;
                let start = Math.max(1, this.currentPage - Math.floor(maxButtons / 2));
                let end = Math.min(totalPages, start + maxButtons - 1);

                if (end - start + 1 < maxButtons) {
                    start = Math.max(1, end - maxButtons + 1);
                }

                for (let i = start; i <= end; i++) {
                    pages += `
                        <button class="paginations-button ${i === this.currentPage ? 'active' : ''}" 
                                onclick="portfolioManager.loadPortfolios(${i})">
                            ${i}
                        </button>
                    `;
                }

                return pages;
            }

            showLoading() {
                const grid = document.getElementById('portfoliosGrid');
                grid.innerHTML = '<div class="loading"></div>';
            }

            hideLoading() {
                const loading = document.querySelector('.loading');
                if (loading) loading.remove();
            }

            showError(message) {
                const grid = document.getElementById('portfoliosGrid');
                grid.innerHTML = `<div class="error-message">${message}</div>`;
            }

            searchPortfolios(searchTerm) {
                if (!searchTerm) {
                    this.filteredPortfolios = this.portfolios;
                } else {
                    this.filteredPortfolios = this.portfolios.filter(portfolio =>
                        portfolio.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        portfolio.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        portfolio.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()))
                    );
                }
                this.currentPage = 1;
                this.displayPortfolios();
                this.updatePagination();
            }
        }

        // Initialize and load portfolios
        const portfolioManager = new PortfolioManager();
        document.addEventListener('DOMContentLoaded', () => {
            portfolioManager.loadPortfolios();
        });

        // Search functionality
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value;

            // Remove tag filter from URL if search is active
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('tag')) {
                urlParams.delete('tag');
                window.history.replaceState({}, '', `${window.location.pathname}?${urlParams}`);
            }

            portfolioManager.searchPortfolios(searchTerm);
        });

        // searchInput.addEventListener('input', (e) => {
        //     portfolioManager.searchPortfolios(e.target.value);
        // });

        // document.addEventListener('click', (e) => {
        //     if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
        //         searchResults.classList.remove('active');
        //     }
        // });

        document.addEventListener('DOMContentLoaded', () => {
            const notificationBanner = document.getElementById('notification-banner');
            const notificationCloseBtn = notificationBanner.querySelector('.notification-close');

            function hasNotificationBeenShown() {
                return localStorage.getItem('portfolioNotificationShown') === 'true';
            }

            function markNotificationAsShown() {
                localStorage.setItem('portfolioNotificationShown', 'true');
            }

            function showNotification() {
                if (!hasNotificationBeenShown()) {
                    notificationBanner.classList.add('show');
                    markNotificationAsShown();
                }
            }

            function hideNotification() {
                notificationBanner.classList.add('hide'); // Add hide class
            }

            // Show notification on page load
            showNotification();

            // Close button event listener
            notificationCloseBtn.addEventListener('click', hideNotification);
        });
    </script>
</body>

</html>